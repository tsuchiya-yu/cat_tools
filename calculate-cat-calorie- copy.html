<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>çŒ«ã®çµ¦é¤Œé‡ï¼ˆã‚«ãƒ­ãƒªãƒ¼ï¼‰è¨ˆç®—ï½œä½“é‡ã¨ãƒ•ãƒ¼ãƒ‰ã‹ã‚‰1æ—¥ã®ç›®å®‰ã‚’è‡ªå‹•è¨ˆç®—</title>
  <meta name="description" content="ä½“é‡ãƒ»ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ»çŠ¶æ…‹ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã€‚çŒ«ã®1æ—¥ã®å¿…è¦ã‚«ãƒ­ãƒªãƒ¼ã¨ã‚°ãƒ©ãƒ æ•°ã€1é£Ÿã‚ãŸã‚Šã®é‡ã¾ã§ã‚ã‹ã‚‹ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã€‚BCSã‹ã‚‰ã®ç†æƒ³ä½“é‡æ¨å®šã«ã‚‚å¯¾å¿œã€‚">
  <link rel="canonical" href="https://cat-tools.catnote.tokyo/calculate-cat-calorie">

  <!-- OGPï¼ˆæš«å®šã®ã¾ã¾ã§ã‚‚OKã€‚å¾Œã§å·®ã—æ›¿ãˆå¯ï¼‰ -->
  <meta property="og:title" content="çŒ«ã®çµ¦é¤Œé‡ï¼ˆã‚«ãƒ­ãƒªãƒ¼ï¼‰è¨ˆç®—">
  <meta property="og:description" content="ä½“é‡ãƒ»çŠ¶æ…‹ãƒ»ãƒ•ãƒ¼ãƒ‰ã®ã‚«ãƒ­ãƒªãƒ¼å¯†åº¦ã‚’å…¥ã‚Œã‚‹ã ã‘ã€‚1æ—¥ã®å¿…è¦ã‚«ãƒ­ãƒªãƒ¼ã¨ä¸ãˆã‚‹é‡ã‚’è‡ªå‹•è¨ˆç®—ã€‚">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://cat-tools.catnote.tokyo/og-cat-calorie.png">
  <meta property="og:locale" content="ja_JP">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400..700&family=Outfit:wght@600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#FF69B4;
      --primary-strong:#E00070;
      --text:#111; --muted:#666; --border:#E9E9EA;

      --r-sm:8px; --r-md:12px; --r-lg:16px; --r-xl:24px;
      --s-1:8px; --s-2:16px; --s-3:24px; --s-4:40px;
      --ring:0 0 0 2px rgba(224,0,112,.35);
    }
    *,*::before,*::after{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:#fff; color:var(--text);
      font-family:"Zen Kaku Gothic New","Noto Sans JP",-apple-system,system-ui,Segoe UI,Meiryo,sans-serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .container{ max-width:760px; margin:0 auto; padding:0 var(--s-3) var(--s-4) }

    .eyebrow{ font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:rgba(224,0,112,.85); margin-top:var(--s-3) }
    h1{ font-size:32px; line-height:1.25; font-weight:700; margin:.4rem 0 0 }
    @media (min-width:768px){ h1{ font-size:40px; line-height:1.2 } }
    .lead{ font-size:14px; color:var(--muted); margin:.6rem 0 var(--s-3); line-height:1.7 }
    .section{ margin-top:var(--s-4) }
    .label{ font-size:18px; font-weight:700; color:#111 }

    /* å…¥åŠ›ã‚¨ãƒªã‚¢ï¼ˆä¸‹ç·šã®ã¿ï¼‰ */
    .surface{
      padding:var(--s-3);
      border:none; border-radius:0;
      border-bottom:1px solid var(--border);
      overflow:hidden;
    }
    .row{ display:flex; flex-direction:column; gap:var(--s-2); margin-top:var(--s-2) }

    input[type="number"], input[type="text"], select{
      width:100%; height:56px; padding:0 var(--s-3);
      border:2px solid #F0C7D8; border-radius:var(--r-xl);
      font-size:16px; color:var(--text); background:#fff;
    }
    input:focus-visible, select:focus-visible{ outline:none; box-shadow:var(--ring) }

    .help{ font-size:13px; color:#808080; margin-top:4px }

    .grid-two{ display:grid; grid-template-columns:1fr 1fr; gap:var(--s-2) }
    @media (max-width:640px){ .grid-two{ grid-template-columns:1fr } }

    details.disclosure{
      margin-top:var(--s-2); border:1px dashed #f0c7d8; border-radius:12px; padding:10px 12px;
      background:#fff;
    }
    details.disclosure summary{ cursor:pointer; font-weight:600; }
    details.disclosure[open]{ background:#fff; }

    /* çµæœè¡¨ç¤º */
    .result{
      text-align:center; position:relative; padding-top:8px; padding-bottom:var(--s-3);
      border-bottom:1px solid var(--border);
    }
    .result .muted{ color:var(--muted); margin-bottom:6px; letter-spacing:.04em }
    .numeral{
      font-family:"Outfit",ui-sans-serif,system-ui,-apple-system,"Helvetica Neue",Arial,sans-serif;
      font-variant-numeric:tabular-nums; letter-spacing:-.01em;
    }
    .big{ display:flex; align-items:baseline; justify-content:center; gap:14px; font-size:0; flex-wrap:wrap }
    .age-group{ display:flex; align-items:baseline; gap:6px }
    .age-group .numeral{ font-size:56px; font-weight:800; color:var(--primary-strong) }
    .age-group .unit{ font-size:18px; color:#111; position:relative; top:-8px }
    @media (min-width:768px){
      .age-group .numeral{ font-size:72px }
      .age-group .unit{ top:-10px; font-size:20px }
    }

    .grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:0; margin-top:18px }
    .cell{ background:transparent; border-left:1px solid #F0C7D8; padding:14px 16px }
    .cell:first-child{ border-left:none }
    .cell .k{ font-size:12px; text-transform:uppercase; letter-spacing:.04em; color:#808080; text-align:center }
    .cell .v{ font-weight:700; font-size:16px; text-align:center; margin-top:6px; word-break:keep-all }

    .error{ color:#b00020; font-size:13px; margin-top:6px; min-height:1.2em }

    /* å…±æœ‰ãƒœã‚¿ãƒ³ï¼‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
    .share-btn{
      position:absolute; right:0; top:0; transform:translateY(-60%);
      width:40px; height:40px; border-radius:999px; border:1px solid #D7DADF;
      background:#fff; display:inline-grid; place-items:center; cursor:pointer;
    }
    .share-btn:hover{ border-color:#B7BBC3 }
    .share-menu{
      position:absolute; right:0; top:0; transform:translateY(-10%); z-index:20;
      background:#fff; border:1px solid #E5E7EB; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.08);
      padding:6px; display:none; min-width:220px;
    }
    .share-menu.open{ display:block }
    .share-item{
      display:flex; align-items:center; gap:10px; width:100%;
      padding:10px 12px; border-radius:8px; background:#fff; color:#111; text-decoration:none; cursor:pointer;
    }
    .share-item:hover{ background:#F8F9FB }
    .share-item svg{ flex-shrink:0 }

    .section-title{ margin-top:var(--s-4); padding-top:var(--s-2); border-top:1px solid var(--border); font-weight:800; font-size:22px; letter-spacing:-.01em }
    @media (min-width:768px){ .section-title{ font-size:24px } }
    details{ border:none; border-top:1px solid #eee; padding:18px 0 }
    details+details{ margin-top:0 }
    summary{ list-style:none; cursor:pointer; display:flex; align-items:center; justify-content:space-between; font-weight:400; color:#111 }
    summary::-webkit-details-marker{ display:none }
    summary:hover{ color:var(--primary-strong) }
    .chev{ transition:transform .15s ease }
    details[open] .chev{ transform:rotate(180deg) }

    .toast{
      position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
      background:#111; color:#fff; font-size:14px; padding:10px 14px; border-radius:10px;
      opacity:0; pointer-events:none; transition:opacity .18s ease;
    }
    .toast.show{ opacity:1 }

    footer{ color:#888; font-size:13px; margin-top:var(--s-4) }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
  </style>
</head>
<body>
  <main class="container">
    <!-- Hero -->
    <section class="section">
      <p class="eyebrow">çŒ«ã®çµ¦é¤Œé‡ã‚’ã‹ã‚“ãŸã‚“è¨ˆç®—</p>
      <h1>çŒ«ã®çµ¦é¤Œé‡ï¼ˆã‚«ãƒ­ãƒªãƒ¼ï¼‰è¨ˆç®—</h1>
      <p class="lead">ä½“é‡ãƒ»çŠ¶æ…‹ãƒ»ãƒ•ãƒ¼ãƒ‰ã®ã‚«ãƒ­ãƒªãƒ¼å¯†åº¦ã‚’å…¥ã‚Œã‚‹ã ã‘ã§ã€1æ—¥ã®å¿…è¦ã‚«ãƒ­ãƒªãƒ¼ã¨ä¸ãˆã‚‹é‡ï¼ˆg/æ—¥ãƒ»1é£Ÿã‚ãŸã‚Šï¼‰ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚BCSã‹ã‚‰ç†æƒ³ä½“é‡ã‚’ä½¿ã£ãŸè¨ˆç®—ã«ã‚‚å¯¾å¿œã€‚</p>

      <div class="surface">
        <div class="label">å…¥åŠ›</div>
        <div class="row">
          <div class="grid-two">
            <div>
              <label class="sr-only" for="w">ä½“é‡(kg)</label>
              <input id="w" type="number" step="0.1" min="0.1" placeholder="ä½“é‡ (kg)">
              <div class="help">ä¾‹: 4.2</div>
            </div>

            <div>
              <label class="sr-only" for="unit">ãƒ•ãƒ¼ãƒ‰å˜ä½</label>
              <select id="unit" aria-label="ãƒ•ãƒ¼ãƒ‰å˜ä½">
                <option value="kcal_per_100g">kcal / 100gï¼ˆãƒ‰ãƒ©ã‚¤ç­‰ï¼‰</option>
                <option value="kcal_per_cup">kcal / cup</option>
                <option value="kcal_per_can">kcal / ç¼¶</option>
                <option value="kcal_per_pouch">kcal / ãƒ‘ã‚¦ãƒ</option>
              </select>
              <div class="help">è£½å“ãƒ©ãƒ™ãƒ«ã®å˜ä½ã‚’é¸æŠ</div>
            </div>

            <div>
              <label class="sr-only" for="energy">ã‚¨ãƒãƒ«ã‚®ãƒ¼é‡</label>
              <input id="energy" type="number" step="1" min="1" placeholder="ã‚¨ãƒãƒ«ã‚®ãƒ¼é‡">
              <div class="help" id="energyHelp">ä¾‹: 380ï¼ˆkcal/100gï¼‰</div>
            </div>

            <div id="cupDensityWrap" hidden>
              <label class="sr-only" for="density">å¯†åº¦ (g/cup)</label>
              <input id="density" type="number" step="1" min="1" placeholder="å¯†åº¦ (g/cup)">
              <div class="help">ä»»æ„ï¼šãã®ã‚«ãƒƒãƒ—1æ¯ã®é‡ã•ï¼ˆgï¼‰</div>
            </div>

            <div>
              <label class="sr-only" for="meals">1æ—¥ã®å›æ•°</label>
              <input id="meals" type="number" step="1" min="1" value="2" placeholder="1æ—¥ã®å›æ•°">
              <div class="help">ä¾‹: 2</div>
            </div>

            <div>
              <label class="sr-only" for="sex">å»å‹¢ãƒ»é¿å¦Š</label>
              <select id="sex" aria-label="å»å‹¢ãƒ»é¿å¦Š">
                <option value="neutered">å»å‹¢/é¿å¦Šæ¸ˆã¿</option>
                <option value="intact">æœªå»å‹¢/æœªé¿å¦Š</option>
              </select>
              <div class="help">æˆçŒ«ã®ä¿‚æ•°é¸å®šã«ä½¿ç”¨</div>
            </div>
          </div>

          <!-- è©³ç´°è¨­å®šï¼ˆæŠ˜ã‚ŠãŸãŸã¿ï¼‰ -->
          <details class="disclosure">
            <summary>è©³ç´°è¨­å®šï¼ˆBCS/å­çŒ«ãƒ»ã‚·ãƒ‹ã‚¢/ç¹æ®–/æ´»å‹•/ç›®æ¨™ãªã©ï¼‰</summary>
            <div class="grid-two" style="margin-top:12px">
              <div>
                <label class="sr-only" for="bcs">BCS(1-9)</label>
                <input id="bcs" type="number" step="1" min="1" max="9" placeholder="BCS (1ã€œ9) ä»»æ„">
                <div class="help">5ãŒé©æ­£ã€‚1ãƒã‚¤ãƒ³ãƒˆâ‰’ä½“è„‚è‚ª10%ã®éä¸è¶³ç›®å®‰</div>
              </div>
              <div>
                <label class="sr-only" for="ideal">ç†æƒ³ä½“é‡ã§è¨ˆç®—</label>
                <select id="ideal" aria-label="ç†æƒ³ä½“é‡ã§è¨ˆç®—">
                  <option value="true">ç†æƒ³ä½“é‡ã‚’ä½¿ã†ï¼ˆæ¨å¥¨ï¼‰</option>
                  <option value="false">ç¾åœ¨ä½“é‡ã‚’ä½¿ã†</option>
                </select>
                <div class="help">BCSæœªå…¥åŠ›ãªã‚‰ç¾åœ¨ä½“é‡</div>
              </div>

              <div>
                <label class="sr-only" for="stage">ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸</label>
                <select id="stage" aria-label="ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸">
                  <option value="adult">æˆçŒ«ï¼ˆã€œç´„7æ­³ï¼‰</option>
                  <option value="kitten_0_3m">å­çŒ« 0â€“3ã‹æœˆ</option>
                  <option value="kitten_4_9m">å­çŒ« 4â€“9ã‹æœˆ</option>
                  <option value="kitten_10m_to_sexual_maturity">å­çŒ« 10ã‹æœˆã€œæˆç†Ÿå‰</option>
                  <option value="mature_senior">ã‚·ãƒ‹ã‚¢ 7â€“11æ­³</option>
                  <option value="super_senior">ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚·ãƒ‹ã‚¢ 12æ­³ã€œ</option>
                </select>
                <div class="help">å­çŒ«/ã‚·ãƒ‹ã‚¢è£œæ­£ã®ç›®å®‰ã«ä½¿ç”¨</div>
              </div>

              <div>
                <label class="sr-only" for="repro">ç¹æ®–</label>
                <select id="repro" aria-label="ç¹æ®–">
                  <option value="none">ãªã—</option>
                  <option value="gestation">å¦Šå¨ </option>
                  <option value="lactation">æˆä¹³</option>
                </select>
                <div class="help">æˆä¹³/å¦Šå¨ ã¯æœ€å„ªå…ˆã§ä¿‚æ•°ã‚’æ±ºå®š</div>
              </div>

              <div>
                <label class="sr-only" for="activity">æ´»å‹•ãƒ¬ãƒ™ãƒ«</label>
                <select id="activity" aria-label="æ´»å‹•ãƒ¬ãƒ™ãƒ«">
                  <option value="normal">ãµã¤ã†</option>
                  <option value="inactive">éæ´»å‹•çš„/è‚¥æº€å‚¾å‘</option>
                  <option value="active">æ´»å‹•çš„</option>
                </select>
              </div>

              <div>
                <label class="sr-only" for="goal">ç›®æ¨™</label>
                <select id="goal" aria-label="ç›®æ¨™">
                  <option value="maintain">ç¶­æŒ</option>
                  <option value="loss">æ¸›é‡</option>
                  <option value="gain">å¢—é‡/å›å¾©æœŸ</option>
                </select>
              </div>
            </div>
          </details>
        </div>

        <div id="error" class="error" role="alert" aria-live="polite"></div>
      </div>
    </section>

    <!-- Result -->
    <section id="resultSection" class="section" aria-live="polite">
      <div class="result">
        <div class="muted">1æ—¥ã®ç›®å®‰</div>

        <div class="big">
          <span class="age-group">
            <span id="kcal" class="numeral">--</span><span class="unit">kcal/æ—¥</span>
          </span>
          <span class="age-group">
            <span id="grams" class="numeral">--</span><span class="unit">g/æ—¥</span>
          </span>
        </div>

        <!-- å…±æœ‰ãƒœã‚¿ãƒ³ -->
        <button id="shareBtn" class="share-btn" aria-haspopup="menu" aria-expanded="false" aria-label="å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#69707D" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"/>
            <path d="M12 16V4"/>
            <path d="M8 8l4-4 4 4"/>
          </svg>
        </button>
        <div id="shareMenu" class="share-menu" role="menu" aria-label="å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼"></div>

        <div class="grid">
          <div class="cell"><div class="k">1é£Ÿã‚ãŸã‚Š</div><div id="perMeal" class="v">â€”</div></div>
          <div class="cell"><div class="k">å€‹æ•°/æ—¥ï¼ˆç¼¶/ãƒ‘ã‚¦ãƒ/æ¯ï¼‰</div><div id="unitsPerDay" class="v">â€”</div></div>
          <div class="cell"><div class="k">ä¿‚æ•°</div><div id="factor" class="v">â€”</div></div>
          <div class="cell"><div class="k">è¨ˆç®—ã«ä½¿ã£ãŸä½“é‡</div><div id="usedWeight" class="v">â€”</div></div>
          <div class="cell" style="grid-column:1/-1"><div class="k">ãƒ¡ãƒ¢</div><div id="note" class="v">â€”</div></div>
        </div>
      </div>
    </section>

    <!-- FAQï¼ˆå¸¸æ™‚è¡¨ç¤ºï¼‰ -->
    <section class="section" aria-labelledby="faqTitle">
      <h2 id="faqTitle" class="section-title">ã‚ˆãã‚ã‚‹è³ªå•</h2>
      <div>
        <details>
          <summary>ã“ã®è¨ˆç®—ã®è€ƒãˆæ–¹ã¯ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
          <div class="muted" style="margin-top:8px">
            RERï¼ˆå®‰é™æ™‚å¿…è¦é‡ï¼‰=<code>70 Ã— ä½“é‡^0.75</code> ã‚’ä½¿ã„ã€ç”Ÿæ´»çŠ¶æ…‹ã«åˆã‚ã›ãŸä¿‚æ•°ã‚’æ›ã‘ã¦1æ—¥ã®å¿…è¦ã‚«ãƒ­ãƒªãƒ¼ï¼ˆDERï¼‰ã‚’æ±‚ã‚ã¾ã™ã€‚<br>
            è¨ˆç®—å€¤ã¯<strong>ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹</strong>ã€‚å€‹ä½“å·®ã§Â±30ã€œ50%ã¶ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ãŸã‚ã€1ã€œ2é€±ã”ã¨ã«ä½“é‡ã¨BCSã‚’è¦‹ãªãŒã‚‰å¾®èª¿æ•´ã—ã¦ãã ã•ã„ã€‚
          </div>
        </details>
        <details>
          <summary>BCSã‹ã‚‰ã€Œç†æƒ³ä½“é‡ã€ã‚’ä½¿ã†ã®ã¯ãªãœï¼Ÿã‚„ã‚Šæ–¹ã¯ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
          <div class="muted" style="margin-top:8px">
            9æ®µéšBCSã¯1ãƒã‚¤ãƒ³ãƒˆå·®â‰’ä½“è„‚è‚ª10%ã®éä¸è¶³ã®ç›®å®‰ã§ã™ã€‚<br>
            æ¨å®šï¼š<code>excess=0.10Ã—(BCSâˆ’5)</code>ã€‚BCS&gt;5ãªã‚‰ <code>ç†æƒ³ä½“é‡=ç¾åœ¨ä½“é‡Ã·(1+excess)</code>ã€BCS&lt;5ãªã‚‰ <code>ç¾åœ¨ä½“é‡Ã·(1âˆ’|excess|)</code>ã€‚<br>
            ã€Œç†æƒ³ä½“é‡ã§è¨ˆç®—ã€ã‚’ONã«ã™ã‚‹ã¨RERã®ä½“é‡ã¨ã—ã¦ã“ã®å€¤ã‚’ä½¿ã„ã¾ã™ï¼ˆOFFãªã‚‰ç¾åœ¨ä½“é‡ï¼‰ã€‚
          </div>
        </details>
        <details>
          <summary>ä¿‚æ•°ã¯ã©ã†é¸ã°ã‚Œã¾ã™ã‹ï¼Ÿï¼ˆå„ªå…ˆé †ä½ï¼‰ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
          <div class="muted" style="margin-top:8px">
            1) æˆä¹³ &gt; 2) å¦Šå¨  &gt; 3) æˆé•·ï¼ˆå­çŒ«ï¼š3.0â†’2.5â†’2.0ï¼‰ &gt; 4) æ¸›é‡/å¢—é‡ &gt; 5) æˆçŒ«ï¼ˆå»å‹¢/æœªå»å‹¢/æ´»å‹•ï¼‰ &gt; 6) ã‚·ãƒ‹ã‚¢è£œæ­£ ã®é †ã§<strong>ã²ã¨ã¤ã ã‘</strong>æ¡ç”¨ã—ã¾ã™ã€‚<br>
            ä¾‹ï¼šæˆä¹³ä¸­ãªã‚‰ä»–ã®è¨­å®šã‚ˆã‚Šå„ªå…ˆã—ã¦ Ã—4.0ï¼ˆç›®å®‰ï¼‰ã‚’ä½¿ã„ã¾ã™ã€‚
          </div>
        </details>
        <details>
          <summary>ãƒ•ãƒ¼ãƒ‰ã®è¡¨ç¤ºãŒã€Œkcal/100gã€ä»¥å¤–ãªã‚“ã ã‘ã©ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
          <div class="muted" style="margin-top:8px">
            å˜ä½ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚<br>
            ãƒ»<strong>kcal/100g</strong>ï¼š<code>g/æ—¥ = DER Ã· kcal/100g Ã— 100</code><br>
            ãƒ»<strong>kcal/cup</strong>ï¼š<code>ã‚«ãƒƒãƒ—/æ—¥ = DER Ã· kcal/cup</code>ã€‚é‡ã•ï¼ˆg/cupï¼‰ãŒåˆ†ã‹ã‚Œã° g ã«æ›ç®—ã—ã¾ã™ã€‚<br>
            ãƒ»<strong>kcal/ç¼¶ãƒ»ãƒ‘ã‚¦ãƒ</strong>ï¼š<code>å€‹/æ—¥ = DER Ã· kcal/å€‹</code>ï¼ˆç«¯æ•°ã¯å®Ÿé‹ç”¨ã«åˆã‚ã›ã¦ä¸¸ã‚ï¼‰ã€‚
          </div>
        </details>
        <details>
          <summary>çµæœã¯ã©ã†ä½¿ãˆã°ã„ã„ï¼Ÿå¾®èª¿æ•´ã®ã‚³ãƒ„ã¯ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
          <div class="muted" style="margin-top:8px">
            ã¾ãšã¯è¨ˆç®—ã©ãŠã‚Šã«å§‹ã‚ã€<strong>é€±1ã€œ2å›ã®ä½“é‡/BCSè¨˜éŒ²</strong>ã‚’ã€‚å¢—ãˆç¶šã‘/æ¸›ã‚Šç¶šã‘ã‚‹å ´åˆã¯ã€ä¸é‡ã‚’<strong>5ã€œ10%</strong>ãšã¤ä¸Šä¸‹ã—ã¦æ§˜å­ã‚’è¦‹ã¾ã—ã‚‡ã†ã€‚<br>
            æ¸›é‡ã¯<b>ã‚†ã£ãã‚Š</b>ãŒå®‰å…¨ã€‚æˆä¹³æœŸã¯å¿…è¦é‡ãŒå¤§ããå¤‰å‹•ã™ã‚‹ãŸã‚ã€é£Ÿã¹ã‚‰ã‚Œã‚‹ç’°å¢ƒã‚’ç”¨æ„ã—ã¤ã¤ä½“èª¿ã‚’ã“ã¾ã‚ã«è¦‹ã¦ãã ã•ã„ã€‚
          </div>
        </details>
      </div>
    </section>

    <footer class="section">Â© <span id="year"></span> CAT LINK tools</footer>
  </main>

  <!-- FAQ æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆç°¡æ˜“ï¼‰ -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"ã“ã®è¨ˆç®—ã®è€ƒãˆæ–¹ã¯ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"RERï¼ˆå®‰é™æ™‚å¿…è¦é‡ï¼‰= 70 Ã— ä½“é‡^0.75 ã‚’ä½¿ã„ã€ç”Ÿæ´»çŠ¶æ…‹ã«åˆã‚ã›ãŸä¿‚æ•°ã‚’æ›ã‘ã¦1æ—¥ã®å¿…è¦ã‚«ãƒ­ãƒªãƒ¼ï¼ˆDERï¼‰ã‚’æ±‚ã‚ã¾ã™ã€‚è¨ˆç®—å€¤ã¯ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã€‚å€‹ä½“å·®ã§Â±30ã€œ50%ã¶ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ãŸã‚ã€1ã€œ2é€±ã”ã¨ã«ä½“é‡ã¨BCSã‚’è¦‹ãªãŒã‚‰å¾®èª¿æ•´ã—ã¦ãã ã•ã„ã€‚"}},
      {"@type":"Question","name":"BCSã‹ã‚‰ç†æƒ³ä½“é‡ã‚’ä½¿ã†ã®ã¯ãªãœï¼Ÿã‚„ã‚Šæ–¹ã¯ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"9æ®µéšBCSã¯1ãƒã‚¤ãƒ³ãƒˆå·®â‰’ä½“è„‚è‚ª10%ã®éä¸è¶³ã®ç›®å®‰ã§ã™ã€‚excess=0.10Ã—(BCSâˆ’5)ã€‚BCS>5ãªã‚‰ ç†æƒ³ä½“é‡=ç¾åœ¨ä½“é‡Ã·(1+excess)ã€BCS<5ãªã‚‰ ç¾åœ¨ä½“é‡Ã·(1âˆ’|excess|)ã€‚ã€ç†æƒ³ä½“é‡ã§è¨ˆç®—ã€ã‚’ONã«ã™ã‚‹ã¨RERã®ä½“é‡ã¨ã—ã¦ã“ã®å€¤ã‚’ä½¿ã„ã¾ã™ã€‚"}},
      {"@type":"Question","name":"ä¿‚æ•°ã¯ã©ã†é¸ã°ã‚Œã¾ã™ã‹ï¼Ÿï¼ˆå„ªå…ˆé †ä½ï¼‰","acceptedAnswer":{"@type":"Answer","text":"1) æˆä¹³ > 2) å¦Šå¨  > 3) æˆé•·ï¼ˆå­çŒ«ï¼š3.0â†’2.5â†’2.0ï¼‰> 4) æ¸›é‡/å¢—é‡ > 5) æˆçŒ«ï¼ˆå»å‹¢/æœªå»å‹¢/æ´»å‹•ï¼‰> 6) ã‚·ãƒ‹ã‚¢è£œæ­£ ã®é †ã§ã²ã¨ã¤ã ã‘æ¡ç”¨ã—ã¾ã™ã€‚"}},
      {"@type":"Question","name":"ãƒ•ãƒ¼ãƒ‰ã®è¡¨ç¤ºãŒã€Œkcal/100gã€ä»¥å¤–ã®ã¨ãã¯ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"kcal/cup ã¯ ã‚«ãƒƒãƒ—/æ—¥=DERÃ·kcal/cupã€‚å¯†åº¦(g/cup)ãŒåˆ†ã‹ã‚Œã°g/æ—¥ã«æ›ç®—ã€‚ç¼¶ã‚„ãƒ‘ã‚¦ãƒã¯ å€‹/æ—¥=DERÃ·kcal/å€‹ï¼ˆç«¯æ•°å‡¦ç†ã¯å®Ÿé‹ç”¨ã«åˆã‚ã›ã¦ï¼‰ã€‚"}},
      {"@type":"Question","name":"çµæœã¯ã©ã†ä½¿ãˆã°ã„ã„ï¼Ÿå¾®èª¿æ•´ã®ã‚³ãƒ„ã¯ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"ã¾ãšã¯è¨ˆç®—ã©ãŠã‚Šã«å§‹ã‚ã€é€±1ã€œ2å›ã®ä½“é‡/BCSè¨˜éŒ²ã‚’ã€‚å¢—æ¸›ãŒç¶šãå ´åˆã¯ä¸é‡ã‚’5ã€œ10%ãšã¤ä¸Šä¸‹ã—ã¦æ§˜å­ã‚’è¦‹ã¾ã—ã‚‡ã†ã€‚æ¸›é‡ã¯ã‚†ã£ãã‚ŠãŒå®‰å…¨ã§ã™ã€‚"}}
    ]
  }
  </script>

  <script>
    // ========= å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ =========
    const $ = (s)=>document.querySelector(s);
    const yearEl = $('#year'); yearEl.textContent = String(new Date().getFullYear());
    const toast = document.createElement('div'); toast.className='toast'; document.body.appendChild(toast);
    function showToast(msg){ toast.textContent=msg; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'), 1600); }

    // ========= å…¥åŠ›å‚ç…§ =========
    const w=$('#w'), unit=$('#unit'), energy=$('#energy'), energyHelp=$('#energyHelp'),
          densityWrap=$('#cupDensityWrap'), density=$('#density'),
          meals=$('#meals'), sex=$('#sex'),
          bcs=$('#bcs'), idealSel=$('#ideal'), stage=$('#stage'),
          repro=$('#repro'), activity=$('#activity'), goal=$('#goal');
    const errEl=$('#error');

    // ========= å‡ºåŠ›å‚ç…§ =========
    const kcalEl=$('#kcal'), gramsEl=$('#grams'), perMealEl=$('#perMeal'),
          unitsPerDayEl=$('#unitsPerDay'), factorEl=$('#factor'),
          usedWeightEl=$('#usedWeight'), noteEl=$('#note');

    // ========= å…±æœ‰ =========
    const shareBtn=$('#shareBtn'), shareMenu=$('#shareMenu');
    shareBtn.addEventListener('click', (e)=>{ e.stopPropagation(); toggleShare(); });
    document.addEventListener('click', (e)=> {
      if (!shareMenu.contains(e.target) && e.target !== shareBtn) toggleShare(false);
    });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') toggleShare(false); });

    function iconX(){ return `
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M18.2 3h2.4l-5.2 5.9L22 21h-4.8l-3.7-7-4.2 4.8V21H4V3h5.3v7.5L18.2 3z"/>
      </svg>`;}
    function iconShare(){ return `
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"/><path d="M12 16V4"/><path d="M8 8l4-4 4 4"/>
      </svg>`;}
    function iconLink(){ return `
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" aria-hidden="true">
        <path d="M10 13a5 5 0 0 1 0-7l1.5-1.5a5 5 0 0 1 7 7L17 12"/>
        <path d="M14 11a5 5 0 0 1 0 7L12.5 19.5a5 5 0 1 1-7-7L7 12"/>
      </svg>`;}

    function buildShareMenu(){
      shareMenu.innerHTML = '';
      const url = new URL(location.href).toString();
      const text = (() => {
        const g = gramsEl.textContent;
        const p = perMealEl.textContent;
        if (g !== 'â€”' && p !== 'â€”') return `ã†ã¡ã®çŒ«ã®çµ¦é¤Œé‡ã¯ã€Œ${g}/æ—¥ï¼ˆ${p}ï¼‰ã€ã§ã—ãŸğŸ¾`;
        return `çŒ«ã®çµ¦é¤Œé‡ï¼ˆã‚«ãƒ­ãƒªãƒ¼ï¼‰ã‚’è¨ˆç®—ã—ã¾ã—ãŸğŸ¾`;
      })();

      if (navigator.share){
        const btnShare = document.createElement('button');
        btnShare.className='share-item';
        btnShare.innerHTML = iconShare() + '<span>ã“ã®çµæœã‚’å…±æœ‰</span>';
        btnShare.addEventListener('click', async () => {
          try { await navigator.share({ title: 'çŒ«ã®çµ¦é¤Œé‡ï¼ˆã‚«ãƒ­ãƒªãƒ¼ï¼‰è¨ˆç®—', text, url }); } catch(e){}
          toggleShare(false);
        });
        shareMenu.appendChild(btnShare);
      }

      const btnX = document.createElement('a');
      btnX.className='share-item';
      btnX.href = `https://x.com/intent/post?${new URLSearchParams({url, text}).toString()}`;
      btnX.target = '_blank'; btnX.rel='noopener';
      btnX.innerHTML = iconX() + '<span>Xã§ã‚·ã‚§ã‚¢</span>';
      btnX.addEventListener('click', ()=> toggleShare(false));
      shareMenu.appendChild(btnX);

      const btnCopy = document.createElement('button');
      btnCopy.className='share-item';
      btnCopy.innerHTML = iconLink() + '<span>ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</span>';
      btnCopy.addEventListener('click', async () => {
        await navigator.clipboard.writeText(url);
        showToast('ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
        toggleShare(false);
      });
      shareMenu.appendChild(btnCopy);
    }
    function toggleShare(open){
      if (typeof open === 'undefined') open = !shareMenu.classList.contains('open');
      shareMenu.classList.toggle('open', open);
      shareBtn.setAttribute('aria-expanded', String(open));
      if (open) buildShareMenu();
    }

    // ========= è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆä»•æ§˜æº–æ‹ ï¼‰ =========
    function idealWeightFromBCS(weight_kg, bcs_9pt){
      if (!(bcs_9pt >= 1 && bcs_9pt <= 9)) return weight_kg;
      const excess_ratio = 0.10 * (bcs_9pt - 5);
      if (excess_ratio > 0) return weight_kg / (1 + excess_ratio);
      if (excess_ratio < 0) return weight_kg / (1 - Math.abs(excess_ratio));
      return weight_kg;
    }
    function pickFactor(p){
      // 1) ç¹æ®–
      if (p.reproduction === 'lactation') return { value: 4.0, label: 'æˆä¹³ Ã—4.0ï¼ˆç›®å®‰2.0ã€œ6.0ï¼‰', group:'reproduction' };
      if (p.reproduction === 'gestation') return { value: 2.5, label: 'å¦Šå¨  Ã—2.5ï¼ˆç›®å®‰2.0ã€œ3.0ï¼‰', group:'reproduction' };
      // 2) æˆé•·ï¼ˆå­çŒ«ï¼‰
      if (p.life_stage === 'kitten_0_3m') return { value: 3.0, label: 'å­çŒ« 0â€“3ã‹æœˆ Ã—3.0', group:'growth' };
      if (p.life_stage === 'kitten_4_9m') return { value: 2.5, label: 'å­çŒ« 4â€“9ã‹æœˆ Ã—2.5', group:'growth' };
      if (p.life_stage === 'kitten_10m_to_sexual_maturity') return { value: 2.0, label: 'å­çŒ« 10ã‹æœˆã€œæˆç†Ÿå‰ Ã—2.0', group:'growth' };
      // 3) ä½“é‡èª¿æ•´
      if (p.goal === 'loss') return { value: 0.85, label:'æ¸›é‡é–‹å§‹ Ã—0.85ï¼ˆ0.8ã€œ1.0ï¼‰', group:'goal' };
      if (p.goal === 'gain') return { value: 1.3, label:'å¢—é‡/å›å¾©æœŸ Ã—1.3ï¼ˆ1.2ã€œ1.4ï¼‰', group:'goal' };
      // 4) æˆçŒ«ï¼ˆå»å‹¢/æ´»å‹•ï¼‰
      if (p.activity_level === 'inactive') return { value: 1.0, label:'éæ´»å‹•/è‚¥æº€å‚¾å‘ Ã—1.0', group:'adult' };
      if (p.sex_status === 'intact') return { value: 1.4, label:'æˆçŒ«ï¼ˆæœªå»å‹¢/æœªé¿å¦Šï¼‰Ã—1.4', group:'adult' };
      if (p.activity_level === 'active') return { value: 1.6, label:'æ´»å‹•çš„ Ã—1.6', group:'adult' };
      // 5) ã‚·ãƒ‹ã‚¢è£œæ­£ï¼ˆæ—¢å®šï¼šå»å‹¢/é¿å¦Šæ¸ˆã¿ 1.2 ã‚’åŸºæº–ã«ï¼‰
      let base=1.2, label='æˆçŒ«ï¼ˆå»å‹¢/é¿å¦Šæ¸ˆï¼‰Ã—1.2';
      if (p.life_stage === 'mature_senior'){ base=1.2; label='ã‚·ãƒ‹ã‚¢ 7â€“11æ­³ Ã—1.2ï¼ˆ1.1ã€œ1.4ï¼‰'; }
      if (p.life_stage === 'super_senior'){ base=1.1; label='ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚·ãƒ‹ã‚¢ 12æ­³ã€œ Ã—1.1ï¼ˆå€‹ä½“å·®å¤§ï¼‰'; }
      return { value: base, label, group:'seniorOrAdult' };
    }

    function calcCatCalories(input) {
      const {
        weight_kg, bcs_9pt = null, use_ideal_weight = true,
        sex_status = 'neutered', life_stage = 'adult',
        activity_level = 'normal', goal = 'maintain',
        reproduction = 'none',
        food_energy_input_type = 'kcal_per_100g',
        food_energy_value, meals_per_day = 2,
        unit_density_g_per_cup = null
      } = input;

      const warnings = [];
      if (!(weight_kg > 0)) return { ok:false, error:'ä½“é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' };
      if (weight_kg < 0.5 || weight_kg > 12) warnings.push('ä½“é‡ãŒä¸€èˆ¬çš„ãªå®¶åº­çŒ«ã®ç¯„å›²ã‚’å¤–ã‚Œã¦ã„ã¾ã™ã€‚ç›®å®‰ã¨ã—ã¦æ‰±ã£ã¦ãã ã•ã„ã€‚');
      if (!(food_energy_value > 0)) return { ok:false, error:'ãƒ•ãƒ¼ãƒ‰ã®ã‚«ãƒ­ãƒªãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' };
      if (food_energy_input_type === 'kcal_per_100g' && (food_energy_value < 50 || food_energy_value > 500)) {
        warnings.push('kcal/100g ãŒç¾å®Ÿçš„ãªç¯„å›²ã‚’å¤–ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚');
      }
      if (!(meals_per_day >= 1 && meals_per_day <= 6)) return { ok:false, error:'1æ—¥ã®å›æ•°ã¯1ã€œ6å›ã§å…¥åŠ›ã—ã¦ãã ã•ã„' };

      // 1) ä½“é‡
      const ideal = (bcs_9pt == null) ? weight_kg : idealWeightFromBCS(weight_kg, bcs_9pt);
      const usedWeight = (String(use_ideal_weight) === 'true') ? ideal : weight_kg;
      if (usedWeight <= 0) return { ok:false, error:'ä½“é‡ã®æŒ‡å®šã«å•é¡ŒãŒã‚ã‚Šã¾ã™' };

      // 2) RER
      const RER = 70 * Math.pow(usedWeight, 0.75);

      // 3) ä¿‚æ•°
      const factorInfo = pickFactor({ reproduction, life_stage, goal, sex_status, activity_level });
      const factor = factorInfo.value;

      // 4) DER
      const DER = RER * factor;

      // 5) ä¸é‡ç®—å‡º
      let food_g_per_day = null;
      let units_per_day = null;
      if (food_energy_input_type === 'kcal_per_100g') {
        food_g_per_day = DER / food_energy_value * 100;
      } else if (food_energy_input_type === 'kcal_per_cup') {
        const cups = DER / food_energy_value;
        units_per_day = cups;
        if (unit_density_g_per_cup) food_g_per_day = cups * unit_density_g_per_cup;
      } else {
        // can/pouch
        units_per_day = DER / food_energy_value;
      }

      // 6-7) ä¸¸ã‚
      const round1 = (x)=> Math.round(x * 10) / 10;
      const daily_kcal = round1(DER);
      const grams_per_day = (food_g_per_day != null) ? round1(food_g_per_day) : null;
      const per_meal_g = (grams_per_day != null) ? round1(grams_per_day / meals_per_day) : null;
      const units = (units_per_day != null) ? round1(units_per_day) : null;

      let notes = 'ã“ã‚Œã¯ä¸€èˆ¬çš„ãªç›®å®‰ã§ã™ã€‚1ã€œ2é€±ã”ã¨ã«ä½“é‡ã¨BCSã‚’è¨˜éŒ²ã—ã€å¿…è¦ã«å¿œã˜ã¦Â±5ã€œ10%ã§å¾®èª¿æ•´ã—ã¦ãã ã•ã„ã€‚';
      if (goal === 'loss') notes = 'æ¸›é‡ã¯æ€¥ãŒãšã€1ã€œ2é€±ã”ã¨ã®ä½“é‡ãƒã‚§ãƒƒã‚¯ã§Â±5ã€œ10%ãšã¤å¾®èª¿æ•´ã—ã¾ã—ã‚‡ã†ã€‚';
      if (reproduction === 'lactation') notes = 'æˆä¹³æœŸã¯å¿…è¦é‡ãŒå¤§ããå¤‰å‹•ã—ã¾ã™ã€‚é£Ÿã¹ãŸã„ã ã‘é£Ÿã¹ã‚‰ã‚Œã‚‹ç’°å¢ƒã‚„é«˜ã‚¨ãƒãƒ«ã‚®ãƒ¼é£Ÿã‚‚æ¤œè¨ã‚’ã€‚';

      return {
        ok: true,
        daily_kcal,
        grams_per_day,
        per_meal_g,
        units_per_day: units,
        meals_per_day,
        used_weight_kg: Math.round(usedWeight * 100) / 100,
        factor_used: `${factor.toFixed(2)}ï¼ˆ${factorInfo.label}ï¼‰`,
        factor_source: factorInfo,
        warnings,
        notes
      };
    }

    // ========= è¨ˆç®—ã¨UIæ›´æ–° =========
    function update(){
      errEl.textContent = '';
      const input = {
        weight_kg: parseFloat(w.value),
        bcs_9pt: bcs.value ? parseInt(bcs.value,10) : null,
        use_ideal_weight: idealSel.value,
        sex_status: sex.value,
        life_stage: stage.value,
        activity_level: activity.value,
        goal: goal.value,
        reproduction: repro.value,
        food_energy_input_type: unit.value,
        food_energy_value: parseFloat(energy.value),
        meals_per_day: parseInt(meals.value || '2',10),
        unit_density_g_per_cup: density.value ? parseFloat(density.value) : null
      };
      const res = calcCatCalories(input);
      if (!res.ok){ errEl.textContent = res.error; return; }

      kcalEl.textContent = res.daily_kcal.toFixed(1);
      gramsEl.textContent = (res.grams_per_day != null) ? `${res.grams_per_day} g` : 'â€”';
      perMealEl.textContent = (res.per_meal_g != null) ? `${res.per_meal_g} g/é£Ÿ` : 'â€”';
      unitsPerDayEl.textContent = (res.units_per_day != null) ? `${res.units_per_day} /æ—¥` : 'â€”';
      factorEl.textContent = res.factor_used;
      usedWeightEl.textContent = `${res.used_weight_kg} kg`;
      noteEl.textContent = res.notes;

      // URLåŒæœŸï¼ˆå…±æœ‰ã®ãŸã‚ï¼‰
      const url = new URL(location.href);
      url.searchParams.set('w', w.value || '');
      url.searchParams.set('t', unit.value);
      url.searchParams.set('e', energy.value || '');
      url.searchParams.set('m', meals.value || '2');
      url.searchParams.set('x', sex.value);
      url.searchParams.set('b', bcs.value || '');
      url.searchParams.set('u', idealSel.value);
      url.searchParams.set('l', stage.value);
      url.searchParams.set('r', repro.value);
      url.searchParams.set('a', activity.value);
      url.searchParams.set('g', goal.value);
      if (density.value) url.searchParams.set('c', density.value);
      history.replaceState(null,'',url);
    }

    // å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ
    [w,unit,energy,density,meals,sex,bcs,idealSel,stage,repro,activity,goal].forEach(el=>{
      el.addEventListener('input', update);
      el.addEventListener('change', update);
    });

    // å˜ä½åˆ‡æ›¿ã§ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€/è£œåŠ©æ¬„ã‚’æ›´æ–°
    function refreshUnitUI(){
      const t = unit.value;
      if (t === 'kcal_per_100g'){
        energy.placeholder='ã‚¨ãƒãƒ«ã‚®ãƒ¼é‡ (kcal/100g)'; energyHelp.textContent='ä¾‹: 380ï¼ˆkcal/100gï¼‰'; densityWrap.hidden=true;
      }else if (t === 'kcal_per_cup'){
        energy.placeholder='ã‚¨ãƒãƒ«ã‚®ãƒ¼é‡ (kcal/cup)'; energyHelp.textContent='ä¾‹: 320ï¼ˆkcal/cupï¼‰'; densityWrap.hidden=false;
      }else if (t === 'kcal_per_can'){
        energy.placeholder='ã‚¨ãƒãƒ«ã‚®ãƒ¼é‡ (kcal/ç¼¶)'; energyHelp.textContent='ä¾‹: 85ï¼ˆkcal/ç¼¶ï¼‰'; densityWrap.hidden=true;
      }else{
        energy.placeholder='ã‚¨ãƒãƒ«ã‚®ãƒ¼é‡ (kcal/ãƒ‘ã‚¦ãƒ)'; energyHelp.textContent='ä¾‹: 65ï¼ˆkcal/ãƒ‘ã‚¦ãƒï¼‰'; densityWrap.hidden=true;
      }
    }
    unit.addEventListener('change', refreshUnitUI);

    // å¾©å…ƒ
    (function restore(){
      const p = new URLSearchParams(location.search);
      if (p.get('w')) w.value = p.get('w');
      if (p.get('t')) unit.value = p.get('t');
      if (p.get('e')) energy.value = p.get('e');
      if (p.get('m')) meals.value = p.get('m');
      if (p.get('x')) sex.value = p.get('x');
      if (p.get('b')) bcs.value = p.get('b');
      if (p.get('u')) idealSel.value = p.get('u');
      if (p.get('l')) stage.value = p.get('l');
      if (p.get('r')) repro.value = p.get('r');
      if (p.get('a')) activity.value = p.get('a');
      if (p.get('g')) goal.value = p.get('g');
      if (p.get('c')) density.value = p.get('c');
      refreshUnitUI();
      update();
    })();

    // åˆæœŸï¼šå…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼
    (function initShare(){
      const shareBtn = $('#shareBtn');
      if (!shareBtn) return;
      // å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯é–‹ã„ãŸã¨ãã«éƒ½åº¦å†æ§‹ç¯‰
    })();
  </script>
</body>
</html>
