<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>çŒ«ã®å¹´é½¢è¨ˆç®—ï½œã€ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã€‘èª•ç”Ÿæ—¥ã‹ã‚‰äººé–“å¹´é½¢ã«æ›ç®—</title>
  <meta name="description" content="èª•ç”Ÿæ—¥ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€çŒ«ã®å¹´é½¢ã‚’äººé–“å¹´é½¢ã«æ›ç®—ã€‚ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ã¨æ¬¡ã®èª•ç”Ÿæ—¥ã¾ã§ã®æ—¥æ•°ã‚‚è¡¨ç¤ºã—ã¾ã™ã€‚å…¥åŠ›ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã®ã¿ã§å®‰å…¨ã€‚">
  <link rel="canonical" href="https://tools.catnote.tokyo/cat-age">

  <!-- Open Graph (ä»»æ„) -->
  <meta property="og:title" content="çŒ«ã®å¹´é½¢è¨ˆç®—ï½œäººé–“å¹´é½¢ã«æ›ç®—">
  <meta property="og:description" content="èª•ç”Ÿæ—¥ã‚’å…¥ã‚Œã‚‹ã ã‘ã§ã€çŒ«ã®å¹´é½¢ã‚’äººé–“å¹´é½¢ã«æ›ç®—ã€‚ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ã‚‚è¡¨ç¤ºã€‚">
  <meta property="og:type" content="website">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400..700&family=Outfit:wght@600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#FF69B4;         /* ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³/ãƒ›ãƒãƒ¼ã®ãƒ©ã‚¤ãƒˆ */
      --primary-strong:#E00070;  /* ä¸»å½¹æ•°å­—/ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ */
      --text:#111; --muted:#666; --border:#E9E9EA;

      --r-sm:8px; --r-md:12px; --r-lg:16px; --r-xl:24px;
      --s-1:8px; --s-2:16px; --s-3:24px; --s-4:40px;
      --ring:0 0 0 2px rgba(224,0,112,.35);
    }

    /* åŸºæœ¬ã¨ã‚¿ã‚¤ãƒ */
    *,*::before,*::after{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:#fff; color:var(--text);
      font-family:"Zen Kaku Gothic New","Noto Sans JP",-apple-system,system-ui,Segoe UI,Meiryo,sans-serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .container{ max-width:760px; margin:0 auto; padding:0 var(--s-3) var(--s-4) }
    .eyebrow{ font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:rgba(224,0,112,.85); margin-top:var(--s-3) }
    h1{ font-size:32px; line-height:1.25; font-weight:700; margin:.4rem 0 0 }
    @media (min-width:768px){ h1{ font-size:40px; line-height:1.2 } }
    .lead{ font-size:14px; color:var(--muted); margin:.6rem 0 var(--s-3); line-height:1.7 }
    .section{ margin-top:var(--s-4) }
    .label{ font-size:18px; font-weight:700; color:#111 }

    /* å…¥åŠ›ï¼ˆä¸Šä¸‹ä¸¦ã³ï¼‰ */
    .surface{
      padding:var(--s-3);
      border:none; border-radius:0;               /* æ ã¨è§’ä¸¸ã‚’ã‚„ã‚ã‚‹ */
      border-bottom:1px solid var(--border);      /* ä¸‹ç·šã ã‘ */
      overflow:hidden;
    }
    .row{ display:flex; flex-direction:column; gap:var(--s-2); margin-top:var(--s-2) }
    input[type="date"]{
      width:100%; height:64px; padding:0 var(--s-3);
      border:2px solid #F0C7D8; border-radius:var(--r-xl);
      font-size:18px; color:var(--text); background:#fff; box-shadow:inset 0 1px 0 #fff;
      appearance:none; -webkit-appearance:none;
    }
    input[type="date"]:focus-visible{ outline:none; box-shadow:var(--ring) }
    input[type="date"]::-webkit-datetime-edit-fields-wrapper{ padding:0 }
    input[type="date"]::-webkit-inner-spin-button{ display:none }
    input[type="date"]::-webkit-calendar-picker-indicator{ opacity:.75; padding:0 10px; margin-right:6px; cursor:pointer }

    /* çµæœè¡¨ç¤ºï¼ˆçµæœãƒ–ãƒ­ãƒƒã‚¯ã®ä¸‹ã«ã‚‚åŒºåˆ‡ã‚Šç·šï¼‰ */
    .result{
      text-align:center; position:relative; padding-top:8px; padding-bottom:var(--s-3);
      border-bottom:1px solid var(--border);
    }
    .result .muted{ color:var(--muted); margin-bottom:6px; letter-spacing:.04em }
    .numeral{
      font-family:"Outfit",ui-sans-serif,system-ui,-apple-system,"Helvetica Neue",Arial,sans-serif;
      font-variant-numeric:tabular-nums; letter-spacing:-.01em;
    }
    .big{ display:flex; align-items:baseline; justify-content:center; gap:10px; font-size:0 }
    .age-group{ display:flex; align-items:baseline; gap:4px }
    .age-group .numeral{ font-size:56px; font-weight:800; color:var(--primary-strong) }
    .age-group .unit{ font-size:18px; color:#111; position:relative; top:-8px }
    @media (min-width:768px){
      .age-group .numeral{ font-size:88px }
      .age-group .unit{ top:-10px; font-size:20px }
    }

    /* ã‚µãƒ–æƒ…å ±ï¼šç¸¦ç½«åŒºåˆ‡ã‚Š */
    .grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:0; margin-top:18px }
    .cell{ background:transparent; border-left:1px solid #F0C7D8; padding:14px 16px }
    .cell:first-child{ border-left:none }
    .cell .k{ font-size:12px; text-transform:uppercase; letter-spacing:.04em; color:#808080; text-align:center }
    .cell .v{ font-weight:700; font-size:16px; text-align:center; margin-top:6px }

    /* å…±æœ‰ãƒœã‚¿ãƒ³ï¼‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
    .share-btn{
      position:absolute; right:0; top:0; transform:translateY(-60%);
      width:40px; height:40px; border-radius:999px; border:1px solid #D7DADF;
      background:#fff; display:inline-grid; place-items:center; cursor:pointer;
    }
    .share-btn:hover{ border-color:#B7BBC3 }
    .share-menu{
      position:absolute; right:0; top:0; transform:translateY(-10%); z-index:20;
      background:#fff; border:1px solid #E5E7EB; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.08);
      padding:6px; display:none; min-width:200px;
    }
    .share-menu.open{ display:block }
    .share-item{
      display:flex; align-items:center; gap:10px; width:100%;
      padding:10px 12px; border-radius:8px; background:#fff; color:#111; text-decoration:none; cursor:pointer;
    }
    .share-item:hover{ background:#F8F9FB }
    .share-item svg{ flex-shrink:0 }

    /* FAQï¼ˆãƒ¡ãƒªãƒãƒªå¼·åŒ–ï¼‰ */
    .section-title{ margin-top:var(--s-4); padding-top:var(--s-2); border-top:1px solid var(--border); font-weight:800; font-size:22px; letter-spacing:-.01em }
    @media (min-width:768px){ .section-title{ font-size:24px } }
    details{ border:none; border-top:1px solid #eee; padding:18px 0 }
    details+details{ margin-top:0 }
    summary{ list-style:none; cursor:pointer; display:flex; align-items:center; justify-content:space-between; font-weight:400; color:#111 }
    summary::-webkit-details-marker{ display:none }
    summary:hover{ color:var(--primary-strong) }
    .chev{ transition:transform .15s ease }
    details[open] .chev{ transform:rotate(180deg) }

    .error{ color:#b00020; font-size:13px; margin-top:6px; min-height:1.2em }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
    @media (prefers-reduced-motion:reduce){ .chev{ transition:none } }
    footer{ color:#888; font-size:13px; margin-top:var(--s-4) }

    /* ãƒˆãƒ¼ã‚¹ãƒˆï¼ˆã‚³ãƒ”ãƒ¼ãªã©ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰ */
    .toast{
      position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
      background:#111; color:#fff; font-size:14px; padding:10px 14px; border-radius:10px;
      opacity:0; pointer-events:none; transition:opacity .18s ease;
    }
    .toast.show{ opacity:1 }
  </style>
</head>
<body>
  <main class="container">
    <!-- Hero -->
    <section class="section">
        <p class="eyebrow">çŒ«ã®å¹´é½¢ã‚’äººé–“å¹´é½¢ã«æ›ç®—</p>
        <h1>çŒ«ã®å¹´é½¢è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>
        <p class="lead">èª•ç”Ÿæ—¥ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€äººé–“å¹´é½¢ãƒ»ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ»æ¬¡ã®èª•ç”Ÿæ—¥ã¾ã§ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
    
        <div class="surface">
        <div class="label">èª•ç”Ÿæ—¥ã‚’å…¥åŠ›</div>
        <div class="row">
            <label for="dob" class="sr-only">çŒ«ã®èª•ç”Ÿæ—¥</label>
            <input id="dob" type="date" autocomplete="bday" placeholder="2023-04-01" aria-describedby="dobHelp">
        </div>
        <div id="error" class="error" role="alert" aria-live="polite"></div>
        </div>
    </section>
    
    <!-- Result -->
    <section id="resultSection" class="section" hidden aria-live="polite">
        <div class="result">
        <div class="muted">äººé–“ã«æ›ç®—ã™ã‚‹ã¨</div>
    
        <div class="big">
            <span class="age-group">
            <span id="humanAgeYears" class="numeral">--</span><span class="unit">æ­³</span>
            </span>
            <span class="age-group">
            <span id="humanAgeMonths" class="numeral">--</span><span class="unit">ã‹æœˆ</span>
            </span>
        </div>
    
        <!-- å…±æœ‰ãƒœã‚¿ãƒ³ -->
        <button id="shareBtn" class="share-btn" aria-haspopup="menu" aria-expanded="false" aria-label="å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#69707D" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"/>
            <path d="M12 16V4"/>
            <path d="M8 8l4-4 4 4"/>
            </svg>
        </button>
    
        <!-- å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆJSã§é …ç›®ã‚’æ³¨å…¥ï¼‰ -->
        <div id="shareMenu" class="share-menu" role="menu" aria-label="å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼"></div>
    
        <div class="grid">
            <div class="cell"><div class="k">å®Ÿå¹´é½¢</div><div id="realAge" class="v">â€”</div></div>
            <div class="cell"><div class="k">ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸</div><div id="stage" class="v">â€”</div></div>
            <div class="cell"><div class="k">æ¬¡ã®èª•ç”Ÿæ—¥ã¾ã§</div><div id="toBday" class="v">â€”</div></div>
        </div>
        </div>
    </section>
    
    <!-- FAQï¼ˆå¸¸æ™‚è¡¨ç¤ºï¼‰ -->
    <section class="section" aria-labelledby="faqTitle">
        <h2 id="faqTitle" class="section-title">ã‚ˆãã‚ã‚‹è³ªå•</h2>
        <div>
        <details>
            <summary>èª•ç”Ÿæ—¥ãŒã¯ã£ãã‚Šåˆ†ã‹ã‚‰ãªã„ã¨ãã¯ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
            <div class="muted" style="margin-top:8px">
            ã ã„ãŸã„ã§å¤§ä¸ˆå¤«ã§ã™ã€‚æœˆã ã‘åˆ†ã‹ã‚‹ãªã‚‰ã€Œãã®æœˆã®1æ—¥ or 15æ—¥ã€ã€å¹´ã ã‘ãªã‚‰ã€Œãã®å¹´ã®7/1ã€ãªã©ã€è¿‘ã„æ—¥ã‚’å…¥ã‚Œã¦ç›®å®‰ã¨ã—ã¦ä½¿ã£ã¦ãã ã•ã„ã€‚
            </div>
        </details>
        <details>
            <summary>å…¥åŠ›ã‚’å¤‰ãˆã‚‹ã¨ã™ãè¨ˆç®—ã•ã‚Œã¾ã™ã‹ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
            <div class="muted" style="margin-top:8px">
            ã¯ã„ã€‚æ—¥ä»˜ã‚’å¤‰æ›´ã™ã‚‹ã¨ä¸‹ã®çµæœãŒè‡ªå‹•ã§æ›´æ–°ã•ã‚Œã¾ã™ã€‚
            </div>
        </details>
        <details>
            <summary>ã©ã†ã‚„ã£ã¦æ›ç®—ã—ã¦ã„ã‚‹ã®ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
            <div class="muted" style="margin-top:8px">
            ç›®å®‰ã¨ã—ã¦ã€Œ1æ­³=äººã®15æ­³ã€2æ­³=24æ­³ã€ä»¥é™ã¯1å¹´ã”ã¨ã«+4æ­³ã€ã§è¨ˆç®—ã—ã€æœˆã¯ãªã‚ã‚‰ã‹ã«è£œé–“ã—ã¦ã„ã¾ã™ã€‚
            </div>
        </details>
        <details>
            <summary>ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ã¯ä½•ã®å½¹ã«ç«‹ã¤ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
            <div class="muted" style="margin-top:8px">
            æˆé•·ã®ã ã„ãŸã„ã®æ®µéšãŒåˆ†ã‹ã‚Šã¾ã™ã€‚<br>
            ãƒ»å­çŒ«ï¼šéŠã³ã‚„ã™ã„ç’°å¢ƒã¥ãã‚Š<br>
            ãƒ»è‹¥å¹´æˆçŒ«ï¼šéŠã³ï¼‹ä½“é‡ç®¡ç†ã®ãƒšãƒ¼ã‚¹ã¥ãã‚Š<br>
            ãƒ»æˆçŒ«ï¼šç”Ÿæ´»ãƒªã‚ºãƒ ã®è¦‹ç›´ã—ã«<br>
            ãƒ»ã‚·ãƒ‹ã‚¢ï¼šç„¡ç†ã®ãªã„é‹å‹•ã‚„ãƒã‚§ãƒƒã‚¯ã®ç›®å®‰ã«
            </div>
        </details>
        <details>
            <summary>çµæœã¯å…±æœ‰ã§ãã¾ã™ã‹ï¼Ÿãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¯ï¼Ÿ <svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></summary>
            <div class="muted" style="margin-top:8px">
            å³ä¸Šã®å…±æœ‰ãƒœã‚¿ãƒ³ã‹ã‚‰URLã‚’ã‚³ãƒ”ãƒ¼ãƒ»å…±æœ‰ã§ãã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã«ã¯ä½•ã‚‚é€ä¿¡ã•ã‚Œãšã€URLã«å«ã¾ã‚Œã‚‹ã®ã¯èª•ç”Ÿæ—¥ã®æ—¥ä»˜ã ã‘ã§ã™ã€‚
            </div>
        </details>
        </div>
    </section>
    
    <footer class="section">Â© <span id="year"></span> CAT LINK tools</footer>  
  </main>

  <!-- FAQ æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆæ›´æ–°ç‰ˆï¼‰ -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"èª•ç”Ÿæ—¥ãŒã¯ã£ãã‚Šåˆ†ã‹ã‚‰ãªã„ã¨ãã¯ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"ã ã„ãŸã„ã§å¤§ä¸ˆå¤«ã§ã™ã€‚æœˆã ã‘åˆ†ã‹ã‚‹ãªã‚‰ãã®æœˆã®1æ—¥ã‚„15æ—¥ã€å¹´ã ã‘ãªã‚‰ãã®å¹´ã®7/1ãªã©ã€è¿‘ã„æ—¥ã‚’å…¥ã‚Œã¦ç›®å®‰ã¨ã—ã¦ä½¿ã£ã¦ãã ã•ã„ã€‚"}},
      {"@type":"Question","name":"å…¥åŠ›ã‚’å¤‰ãˆã‚‹ã¨ã™ãè¨ˆç®—ã•ã‚Œã¾ã™ã‹ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"ã¯ã„ã€‚æ—¥ä»˜ã‚’å¤‰æ›´ã™ã‚‹ã¨çµæœãŒè‡ªå‹•ã§æ›´æ–°ã•ã‚Œã¾ã™ã€‚"}},
      {"@type":"Question","name":"ã©ã†ã‚„ã£ã¦æ›ç®—ã—ã¦ã„ã‚‹ã®ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"ç›®å®‰ã¨ã—ã¦ã€1æ­³=äººã®15æ­³ã€2æ­³=24æ­³ã€ä»¥é™ã¯1å¹´ã”ã¨ã«+4æ­³ã§è¨ˆç®—ã—ã€æœˆã¯ãªã‚ã‚‰ã‹ã«è£œé–“ã—ã¦ã„ã¾ã™ã€‚"}},
      {"@type":"Question","name":"ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ã¯ä½•ã®å½¹ã«ç«‹ã¤ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"æˆé•·ã®ã ã„ãŸã„ã®æ®µéšãŒåˆ†ã‹ã‚Šã¾ã™ã€‚å­çŒ«â†’è‹¥å¹´æˆçŒ«â†’æˆçŒ«â†’ã‚·ãƒ‹ã‚¢ã®ç›®å®‰ã§ã€éŠã³ã‚„ä½“é‡ç®¡ç†ã€ç„¡ç†ã®ãªã„é‹å‹•ãªã©ã®å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚"}},
      {"@type":"Question","name":"çµæœã¯å…±æœ‰ã§ãã¾ã™ã‹ï¼Ÿãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¯ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"å³ä¸Šã®å…±æœ‰ãƒœã‚¿ãƒ³ã‹ã‚‰URLã‚’ã‚³ãƒ”ãƒ¼ãƒ»å…±æœ‰ã§ãã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã«ã¯ä½•ã‚‚é€ä¿¡ã•ã‚Œãšã€URLã«å«ã¾ã‚Œã‚‹ã®ã¯èª•ç”Ÿæ—¥ã®æ—¥ä»˜ã ã‘ã§ã™ã€‚"}}
    ]
  }
  </script>

  <script>
    const $ = (s)=>document.querySelector(s);
    const dobInput = $('#dob');
    const resultSection = $('#resultSection');
    const humanAgeYearsEl = $('#humanAgeYears');
    const humanAgeMonthsEl = $('#humanAgeMonths');
    const realAgeEl = $('#realAge');
    const stageEl = $('#stage');
    const toBdayEl = $('#toBday');
    const errEl = $('#error');
    const yearEl = $('#year');
    const shareBtn = $('#shareBtn');
    const shareMenu = $('#shareMenu');
    const toast = document.createElement('div'); toast.className='toast'; document.body.appendChild(toast);
    yearEl.textContent = String(new Date().getFullYear());

    // URL ?dob=YYYY-MM-DD ã‚’åæ˜ 
    const params = new URLSearchParams(location.search);
    if (params.get('dob')) { dobInput.value = params.get('dob'); calculate(); }

    // å…¥åŠ›å¤‰æ›´ã§ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–
    dobInput.addEventListener('change', calculate);

    // æœªæ¥æ—¥ã‚’UIã§ã‚‚ãƒ–ãƒ­ãƒƒã‚¯
    (function setMaxToday(){
      const t = new Date(); t.setHours(0,0,0,0);
      const yyyy = t.getFullYear();
      const mm = String(t.getMonth()+1).padStart(2,'0');
      const dd = String(t.getDate()).padStart(2,'0');
      dobInput.setAttribute('max', `${yyyy}-${mm}-${dd}`);
    })();

    function calculate(){
      errEl.textContent='';
      const v = dobInput.value;
      if(!v){ errEl.textContent = 'èª•ç”Ÿæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'; resultSection.hidden = true; return; }

      const dob = toLocalDate(v);
      const today = new Date();
      if(dob > today){ errEl.textContent='æœªæ¥æ—¥ã¯æŒ‡å®šã§ãã¾ã›ã‚“ã€‚'; resultSection.hidden=true; return; }

      // å®Ÿå¹´é½¢ï¼ˆæœˆï¼‰
      const months = diffInMonths(dob, today);
      const realY = Math.floor(months/12);
      const realM = months % 12;

      // äººé–“å¹´é½¢ï¼ˆå¹´ã®å°æ•°ï¼‰â†’ å¹´ï¼‹æœˆã«å¤‰æ›ï¼ˆå››æ¨äº”å…¥ã§æœ€ã‚‚è¿‘ã„æœˆï¼‰
      const humanYears = humanAgeYearsDecimal(months);
      const hmTotal = Math.round(humanYears * 12);
      const humanY = Math.floor(hmTotal / 12);
      const humanM = hmTotal % 12;

      // ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆç›®å®‰ï¼‰
      const st = lifeStage(humanYears);

      // æ¬¡ã®èª•ç”Ÿæ—¥ã¾ã§ï¼ˆæ—¥ï¼‰
      const days = daysUntilNextBirthday(dob, today);

      // è¡¨ç¤º
      humanAgeYearsEl.textContent = String(humanY);
      humanAgeMonthsEl.textContent = String(humanM);
      realAgeEl.textContent = `${realY}å¹´${realM}ã‹æœˆ`;
      stageEl.textContent = st;
      toBdayEl.textContent = `${days}æ—¥`;

      // å…±æœ‰URLåŒæœŸ
      const url = new URL(location.href);
      url.searchParams.set('dob', v);
      history.replaceState(null,'',url);

      resultSection.hidden = false;
    }

    // ===== å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ =====
    function buildShareMenu(){
      shareMenu.innerHTML = '';
      const url = new URL(location.href).toString();
      const text = `ã†ã¡ã®çŒ«ã®äººé–“å¹´é½¢ã¯ã€Œ${humanAgeYearsEl.textContent}æ­³${humanAgeMonthsEl.textContent}ã‹æœˆã€ã§ã—ãŸğŸ¾`;

      // Web Share API ãŒä½¿ãˆã‚‹ç«¯æœ«ï¼ˆä¸»ã«SPï¼‰ã«ã¯ã€Œå…±æœ‰ã€ãƒœã‚¿ãƒ³ã‚‚å‡ºã™
      if (navigator.share){
        const btnShare = document.createElement('button');
        btnShare.className='share-item';
        btnShare.innerHTML = iconShare() + '<span>ã“ã®çµæœã‚’å…±æœ‰</span>';
        btnShare.addEventListener('click', async () => {
          try {
            await navigator.share({ title: 'çŒ«ã®å¹´é½¢è¨ˆç®—', text, url });
          } catch(e) {}
          toggleShare(false);
        });
        shareMenu.appendChild(btnShare);
      }

      // X ã§ã‚·ã‚§ã‚¢ï¼ˆPC/ãƒ¢ãƒã‚¤ãƒ«å…±é€šã§è¡¨ç¤ºï¼‰
      const btnX = document.createElement('a');
      btnX.className='share-item';
      btnX.href = xShareUrl(url, text);
      btnX.target = '_blank'; btnX.rel='noopener';
      btnX.innerHTML = iconX() + '<span>Xã§ã‚·ã‚§ã‚¢</span>';
      btnX.addEventListener('click', ()=> toggleShare(false));
      shareMenu.appendChild(btnX);

      // URLã‚³ãƒ”ãƒ¼ï¼ˆãŠã¾ã‘ï¼‰
      const btnCopy = document.createElement('button');
      btnCopy.className='share-item';
      btnCopy.innerHTML = iconLink() + '<span>ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</span>';
      btnCopy.addEventListener('click', async () => {
        await navigator.clipboard.writeText(url);
        showToast('ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
        toggleShare(false);
      });
      shareMenu.appendChild(btnCopy);
    }

    function toggleShare(open){
      if (typeof open === 'undefined') open = !shareMenu.classList.contains('open');
      shareMenu.classList.toggle('open', open);
      shareBtn.setAttribute('aria-expanded', String(open));
      if (open) buildShareMenu();
    }

    shareBtn.addEventListener('click', (e)=>{ e.stopPropagation(); toggleShare(); });
    document.addEventListener('click', (e)=> {
      if (!shareMenu.contains(e.target) && e.target !== shareBtn) toggleShare(false);
    });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') toggleShare(false); });

    function xShareUrl(url, text){
      const p = new URLSearchParams({ url, text });
      // x.com ã§å¤±æ•—ã™ã‚‹ç’°å¢ƒã‚‚ã‚ã‚‹ã®ã§ twitter.com ã‚‚è¨±å®¹
      return `https://x.com/intent/post?${p.toString()}`;
    }
    function iconX(){ return `
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M18.2 3h2.4l-5.2 5.9L22 21h-4.8l-3.7-7-4.2 4.8V21H4V3h5.3v7.5L18.2 3z"/>
      </svg>`;}
    function iconShare(){ return `
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"/><path d="M12 16V4"/><path d="M8 8l4-4 4 4"/>
      </svg>`;}
    function iconLink(){ return `
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" aria-hidden="true">
        <path d="M10 13a5 5 0 0 1 0-7l1.5-1.5a5 5 0 0 1 7 7L17 12"/>
        <path d="M14 11a5 5 0 0 1 0 7L12.5 19.5a5 5 0 1 1-7-7L7 12"/>
      </svg>`;}

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 1600);
    }

    // ===== è¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ =====
    function toLocalDate(yyyyMMdd){ const [y,m,d] = yyyyMMdd.split('-').map(Number); const dt=new Date(); dt.setHours(0,0,0,0); dt.setFullYear(y,m-1,d); return dt; }
    function stripTime(d){ const x=new Date(d); x.setHours(0,0,0,0); return x; }
    function diffInMonths(a,b){ let months=(b.getFullYear()-a.getFullYear())*12+(b.getMonth()-a.getMonth()); if (b.getDate()<a.getDate()) months--; return Math.max(0,months); }
    function humanAgeYearsDecimal(months){ if(months<=0) return 0; if(months<12) return 15*(months/12); if(months<24) return 15+9*((months-12)/12); return 24+4*((months-24)/12); }
    function lifeStage(h){ if(h<15) return 'å­çŒ«'; if(h<40) return 'è‹¥å¹´æˆçŒ«'; if(h<56) return 'æˆçŒ«'; return 'ã‚·ãƒ‹ã‚¢'; }
    function daysUntilNextBirthday(dob,today){ const next=new Date(today); next.setHours(0,0,0,0); next.setMonth(dob.getMonth(), dob.getDate()); if(next<=today) next.setFullYear(today.getFullYear()+1); return Math.ceil((next - stripTime(today))/86400000); }

    // åˆæœŸæç”»ï¼ˆå…¥åŠ›æ¸ˆã¿URLã®æ™‚ã«å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚æ­£ã—ãå‡ºã™ãŸã‚ï¼‰
    buildShareMenu();
  </script>
</body>
</html>
